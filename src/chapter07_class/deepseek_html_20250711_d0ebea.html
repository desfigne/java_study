<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Java 은행 시스템 학습 도구</title>
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #3498db;
      --accent: #e74c3c;
      --light: #ecf0f1;
      --dark: #1a2530;
      --code-bg: #2d2d2d;
      --comment: #6a9955;
      --keyword: #569cd6;
      --string: #ce9178;
      --number: #b5cea8;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, var(--primary), var(--dark));
      color: var(--light);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      padding: 20px 0;
      margin-bottom: 30px;
      border-bottom: 2px solid var(--secondary);
    }
    
    h1 {
      font-size: 2.8rem;
      margin-bottom: 10px;
      background: linear-gradient(90deg, var(--secondary), #1abc9c);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.6;
    }
    
    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 25px;
    }
    
    @media (max-width: 1000px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }
    
    .panel {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .panel-header {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px 20px;
      font-weight: bold;
      font-size: 1.2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
    }
    
    .panel-header i {
      margin-right: 10px;
      color: var(--secondary);
    }
    
    .panel-content {
      padding: 20px;
      max-height: 600px;
      overflow-y: auto;
    }
    
    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 15px 20px;
      background: rgba(0, 0, 0, 0.2);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .tab {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 30px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }
    
    .tab:hover {
      background: rgba(52, 152, 219, 0.3);
    }
    
    .tab.active {
      background: var(--secondary);
      color: white;
      font-weight: bold;
    }
    
    .code-container {
      background: var(--code-bg);
      border-radius: 8px;
      padding: 20px;
      font-family: 'Consolas', 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.5;
      overflow-x: auto;
      max-height: 500px;
      position: relative;
    }
    
    .code-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: linear-gradient(to bottom, rgba(45,45,45,1), rgba(45,45,45,0));
      z-index: 2;
    }
    
    .code-container::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: linear-gradient(to top, rgba(45,45,45,1), rgba(45,45,45,0));
      z-index: 2;
    }
    
    .code-line {
      display: flex;
      margin-bottom: 3px;
      position: relative;
      z-index: 1;
    }
    
    .line-number {
      width: 40px;
      color: #7e7e7e;
      text-align: right;
      padding-right: 15px;
      user-select: none;
    }
    
    .code-content {
      flex: 1;
      white-space: pre-wrap;
    }
    
    .comment {
      color: var(--comment);
      font-style: italic;
    }
    
    .keyword {
      color: var(--keyword);
      font-weight: bold;
    }
    
    .string {
      color: var(--string);
    }
    
    .number {
      color: var(--number);
    }
    
    .annotation {
      color: #c586c0;
    }
    
    .explanation {
      padding: 20px;
      line-height: 1.8;
    }
    
    .explanation h3 {
      color: var(--secondary);
      margin: 15px 0 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 8px;
    }
    
    .explanation ul {
      padding-left: 25px;
      margin: 10px 0;
    }
    
    .explanation li {
      margin-bottom: 8px;
    }
    
    .highlight {
      background: rgba(52, 152, 219, 0.2);
      border-left: 3px solid var(--secondary);
      padding: 12px 15px;
      border-radius: 0 8px 8px 0;
      margin: 15px 0;
    }
    
    .simulation {
      grid-column: span 2;
    }
    
    @media (max-width: 1000px) {
      .simulation {
        grid-column: span 1;
      }
    }
    
    .console {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 8px;
      font-family: monospace;
      height: 200px;
      overflow-y: auto;
      margin-top: 15px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .console-line {
      margin-bottom: 8px;
      padding-left: 10px;
      border-left: 2px solid var(--secondary);
    }
    
    .controls {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    button {
      padding: 12px 20px;
      background: var(--secondary);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      flex: 1;
    }
    
    button:hover {
      background: #2980b9;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    .btn-reset {
      background: var(--accent);
    }
    
    .btn-reset:hover {
      background: #c0392b;
    }
    
    footer {
      text-align: center;
      padding: 30px 0;
      margin-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9rem;
    }
    
    .file-structure {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
    }
    
    .file-structure ul {
      padding-left: 20px;
    }
    
    .file-structure li {
      margin: 8px 0;
      font-family: monospace;
    }
    
    .file-structure .folder {
      color: var(--secondary);
      font-weight: bold;
    }
    
    .file-structure .file {
      color: var(--string);
    }
    
    .diagram {
      text-align: center;
      margin: 20px 0;
      padding: 15px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
    }
    
    .diagram img {
      max-width: 100%;
      border-radius: 8px;
    }
    
    .diagram-placeholder {
      background: rgba(255, 255, 255, 0.05);
      height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.5);
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Java 은행 시스템 학습 도구</h1>
      <p class="subtitle">
        자바 객체지향 프로그래밍 개념을 학습하기 위한 은행 시스템 예제입니다. 
        각 탭을 통해 클래스별 코드를 확인하고, 설명을 읽으며 객체 간의 관계와 
        상호작용 방식을 이해할 수 있습니다. 시뮬레이션을 통해 실제 실행 흐름도 확인해보세요.
      </p>
    </header>
    
    <div class="tabs">
      <div class="tab active" data-file="AccountPaperVo">AccountPaperVo.java</div>
      <div class="tab" data-file="AccountVo">AccountVo.java</div>
      <div class="tab" data-file="BankMan">BankMan.java</div>
      <div class="tab" data-file="BankSystem">BankSystem.java</div>
      <div class="tab" data-file="Customer">Customer.java</div>
      <div class="tab" data-file="KBBank">KBBank.java</div>
    </div>
    
    <div class="main-content">
      <div class="panel">
        <div class="panel-header">
          <i>📄</i> <span class="filename">AccountPaperVo.java</span> 코드
        </div>
        <div class="panel-content">
          <div class="code-container" id="code-display">
            <!-- 코드가 여기에 동적으로 로드됩니다 -->
          </div>
        </div>
      </div>
      
      <div class="panel">
        <div class="panel-header">
          <i>📖</i> 코드 설명 및 학습 가이드
        </div>
        <div class="panel-content explanation" id="explanation">
          <!-- 설명이 여기에 동적으로 로드됩니다 -->
        </div>
      </div>
      
      <div class="panel simulation">
        <div class="panel-header">
          <i>⚙️</i> 시스템 실행 시뮬레이션
        </div>
        <div class="panel-content">
          <p>실행 버튼을 눌러 프로그램의 실행 흐름을 확인하세요. 콘솔에 출력되는 메시지를 통해 객체 간의 상호작용을 이해할 수 있습니다.</p>
          
          <div class="console" id="console-output">
            <div class="console-line">콘솔 출력이 여기에 표시됩니다...</div>
          </div>
          
          <div class="controls">
            <button id="btn-run">프로그램 실행</button>
            <button id="btn-step">단계별 실행</button>
            <button id="btn-reset" class="btn-reset">초기화</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="file-structure">
      <h3>📁 프로젝트 파일 구조</h3>
      <ul>
        <li class="folder">chapter07.java0718Kbank_v02
          <ul>
            <li class="file">AccountPaperVo.java</li>
            <li class="file">AccountVo.java</li>
            <li class="file">BankMan.java</li>
            <li class="file">BankSystem.java</li>
            <li class="file">Customer.java</li>
            <li class="file">KBBank.java</li>
          </ul>
        </li>
      </ul>
    </div>
    
    <div class="diagram">
      <h3>📊 클래스 다이어그램</h3>
      <div class="diagram-placeholder">
        클래스 간의 관계를 보여주는 다이어그램 영역 (실제 구현에서는 UML 다이어그램이 표시됨)
      </div>
    </div>
    
    <footer>
      <p>Java 은행 시스템 학습 도구 | 객체지향 프로그래밍 개념 이해를 위한 교육용 도구</p>
      <p>© 2023 Java 교육용 프로그램. 비전공자 및 초보자를 위한 학습 자료입니다.</p>
    </footer>
  </div>

  <script>
    // 파일별 코드 데이터
    const codeData = {
      AccountPaperVo: {
        code: `package chapter07.java0718Kbank_v02;

/**
 * 은행에 비치되어 있는 입출금 용지
 * 싱글턴 패턴으로 구현되어 하나의 인스턴스만 존재
 */
public class AccountPaperVo {
  
  // 고객 정보 필드
  private String name;
  private String accountNumber;
  private String password;
  private int money;
  
  // 3. 싱글턴 인스턴스 - 정적(static) 변수로 선언
  private static AccountPaperVo accountPaper = new AccountPaperVo(); 
  
  // 2. private 생성자 - 외부에서 인스턴스 생성 방지
  private AccountPaperVo() {} 
  
  /**
   * 17. 계정 정보 출력 메소드
   * 정적 메소드이므로 인스턴스 없이 호출 가능
   */
  public static void showInfo() {
    System.out.println("=============================================");
    System.out.print(accountPaper.getName() + "\\t");
    System.out.print(accountPaper.getAccountNumber() + "\\t");
    System.out.print(accountPaper.getPassword() + "\\t");
    System.out.print(accountPaper.getMoney() + "\\n");
    System.out.println("=============================================");
  }
  
  // 4. 싱글턴 인스턴스 반환 메소드
  public static AccountPaperVo getInstance() { 
    return accountPaper;
  }
  
  // Getter와 Setter 메소드들
  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
  public String getAccountNumber() {
    return accountNumber;
  }
  public void setAccountNumber(String accountNumber) {
    this.accountNumber = accountNumber;
  }
  public String getPassword() {
    return password;
  }
  public void setPassword(String password) {
    this.password = password;
  }
  public int getMoney() {
    return money;
  }
  public void setMoney(int money) {
    this.money = money;
  }
}`,
        explanation: `
          <h3>AccountPaperVo 클래스 설명</h3>
          <p>이 클래스는 은행의 입출금 용지를 객체로 표현한 것으로, 싱글턴(Singleton) 디자인 패턴을 사용합니다.</p>
          
          <div class="highlight">
            <p><strong>싱글턴 패턴의 핵심 요소:</strong></p>
            <ul>
              <li><b>private 생성자</b>: 외부에서 new 키워드로 인스턴스 생성을 방지</li>
              <li><b>정적(static) 인스턴스 변수</b>: 클래스 로딩 시 단 한 번만 생성</li>
              <li><b>getInstance() 정적 메소드</b>: 유일한 인스턴스에 접근할 수 있는 전역 접근점 제공</li>
            </ul>
          </div>
          
          <h3>클래스의 역할</h3>
          <ul>
            <li>고객의 입출금 정보(이름, 계좌번호, 비밀번호, 금액)를 저장</li>
            <li>싱글턴 패턴으로 구현되어 애플리케이션 전체에서 단 하나의 인스턴스만 존재</li>
            <li>showInfo() 메소드를 통해 현재 저장된 정보 출력</li>
          </ul>
          
          <h3>학습 포인트</h3>
          <ul>
            <li><b>싱글턴 패턴</b>: 시스템에서 단 하나의 인스턴스만 필요한 경우 사용하는 디자인 패턴</li>
            <li><b>private 생성자</b>: 객체 생성을 제어하는 방법</li>
            <li><b>정적(static) 멤버</b>: 클래스 수준에서 공유되는 변수와 메소드</li>
            <li><b>캡슐화</b>: 필드는 private으로 선언하고 public 메소드를 통해 접근</li>
          </ul>
        `
      },
      AccountVo: {
        code: `package chapter07.java0718Kbank_v02;

/**
 * 은행의 고객 정보를 담는 클래스
 * 은행직원을 통해 생성됨
 */
public class AccountVo {
  // 고객 정보 필드
  private String name;
  private String accountNumber;
  private String password;
  private int balance;

  // Getter와 Setter 메소드들
  public String getName() { 
    return name; 
  }
  public void setName(String name) { 
    this.name = name; 
  }

  public String getAccountNumber() { 
    return accountNumber; 
  }
  public void setAccountNumber(String accountNumber) { 
    this.accountNumber = accountNumber; 
  }

  public String getPassword() { 
    return password; 
  }
  public void setPassword(String password) { 
    this.password = password; 
  }

  public int getBalance() { 
    return balance; 
  }
  public void setBalance(int balance) { 
    this.balance = balance; 
  }
}`,
        explanation: `
          <h3>AccountVo 클래스 설명</h3>
          <p>이 클래스는 은행 고객의 계정 정보를 저장하는 VO(Value Object)입니다.</p>
          
          <div class="highlight">
            <p><strong>VO(Value Object)의 특징:</strong></p>
            <ul>
              <li>데이터 저장과 전달을 위한 객체</li>
              <li>불변성(Immutable)을 가지는 것이 일반적</li>
              <li>비즈니스 로직을 포함하지 않음</li>
            </ul>
          </div>
          
          <h3>클래스의 역할</h3>
          <ul>
            <li>고객의 계정 정보(이름, 계좌번호, 비밀번호, 잔액) 저장</li>
            <li>은행 시스템에서 고객 정보를 전달할 때 사용</li>
            <li>은행 직원이 고객 정보를 관리하는 데 활용</li>
          </ul>
          
          <h3>학습 포인트</h3>
          <ul>
            <li><b>VO(Value Object)</b>: 데이터 전달을 위한 객체의 역할 이해</li>
            <li><b>캡슐화</b>: 모든 필드는 private으로 선언</li>
            <li><b>Getter/Setter</b>: 객체의 데이터에 접근하고 수정하는 표준 방법</li>
            <li><b>은행 시스템 모델링</b>: 실제 은행 시스템에서 사용되는 데이터 구조 이해</li>
          </ul>
        `
      },
      BankMan: {
        code: `package chapter07.java0718Kbank_v02;

/**
 * 은행 직원 클래스
 * 고객의 요청을 처리하는 역할
 */
public class BankMan {
  
  // 직원 정보 및 상태
  String name;
  int checkResult;
  
  // 의존성 주입을 받을 객체들
  private AccountPaperVo accountPaper;
  private AccountVo[] accountList;
  private BankSystem kbsystem; // 10. BankSystem 의존성
  
  // 유효성 검사 상수
  public static final int ACCOUNT_NAME = 1;
  public static final int ACCOUNT_NUMBER = 2;
  public static final int ACCOUNT_PASSWORD = 3;
  public static final int ACCOUNT_MONEY = 4;

  // 기본 생성자
  public BankMan() {} // 6.

  // 매개변수 생성자
  public BankMan(String name, BankSystem kbsystem) { 
    this.name = "[은행직원 : " + name + "]";
    this.kbsystem = kbsystem;
    System.out.println(this.name + " 업무시작");
  }
  
  /**
   * 고객의 출금정보 유효성 체크 결과에 따라 질문
   */
  public void ask(int status) {
    System.out.println(this.name + " 출금용지에 기재된 고객 정보 유효성 체크 진행");
    switch(status) {
      case ACCOUNT_NAME:
        System.out.println(this.name + " 이름이 일치하지 않습니다, 다시 입력해주세요.");
        checkResult = ACCOUNT_NAME;
        break;
      case ACCOUNT_NUMBER:
        System.out.println(this.name + " 계좌번호가 일치하지 않습니다, 다시 입력해주세요.");
        checkResult = ACCOUNT_NUMBER;
        break;
      case ACCOUNT_PASSWORD:
        System.out.println(this.name + " 비밀번호가 일치하지 않습니다, 다시 입력해주세요.");
        checkResult = ACCOUNT_PASSWORD;
        break;
      case ACCOUNT_MONEY:
        System.out.println(this.name + " 금액이 일치하지 않습니다, 다시 입력해주세요.");
        checkResult = ACCOUNT_MONEY;
        break;
    }
  }
  
  /**
   * 고객의 출금정보 유효성 체크
   */
  public void validateCheck() {
    if(accountPaper.getName() == null) {
      ask(ACCOUNT_NAME);
    }
    else if(accountPaper.getAccountNumber() == null) {
      ask(ACCOUNT_NUMBER);
    }
    else if(accountPaper.getPassword() == null) {
      ask(ACCOUNT_PASSWORD);
    }
    else if(accountPaper.getMoney() == 0) {
      ask(ACCOUNT_MONEY);
    }
    else {
      // 모든 정보가 입력됨
    }
  }
  
  /**
   * 출금 요청 처리
   */
  public void processWithdrawal() {
    System.out.println(this.name + " 출금요청 처리 진행 중...");
    // 고객계정 검색
    int accountIdx = kbsystem.searchAccount(accountPaper);
    if(accountIdx != -1) {
      AccountVo account = kbsystem.accountList[accountIdx];
      if(account.getBalance() >= accountPaper.getMoney()) {
        // 출금 진행
        int money = account.getBalance() - accountPaper.getMoney();
        account.setBalance(money);
        kbsystem.accountList[accountIdx] = account;
        processCompleted();
      } else {
        System.out.println(this.name + " 잔액이 부족합니다.");
      }
    } else {
      System.out.println(this.name + " 계좌정보가 일치하지 않습니다.");
    }
  }
  
  /**
   * 출금 완료 처리
   */
  public void processCompleted() {
    System.out.println(this.name +" 출금 처리가 완료되었습니다.");
    System.out.println(this.name +" 출금액: " + accountPaper.getMoney());
  }

  // Getter와 Setter 메소드들
  public AccountPaperVo getAccountPaper() {
    return accountPaper;
  }

  public void setAccountPaper(AccountPaperVo accountPaper) {
    this.accountPaper = accountPaper;
    System.out.println(this.name +" 방문고객에게 출금용지 받음");
  }

  public AccountVo[] getAccountList() {
    return accountList;
  }

  public void setAccountList(AccountVo[] accountList) {
    this.accountList = accountList;
  }

  public BankSystem getKbsystem() {
    return kbsystem;
  }

  public void setKbsystem(BankSystem kbsystem) {
    this.kbsystem = kbsystem;
  }
}`,
        explanation: `
          <h3>BankMan 클래스 설명</h3>
          <p>이 클래스는 은행 직원의 역할을 구현한 것으로, 고객의 요청을 처리하고 유효성 검사를 수행합니다.</p>
          
          <div class="highlight">
            <p><strong>은행 직원의 주요 책임:</strong></p>
            <ul>
              <li>고객으로부터 입출금 용지 접수</li>
              <li>고객 정보 유효성 검사</li>
              <li>출금 요청 처리</li>
              <li>은행 시스템과의 상호작용</li>
            </ul>
          </div>
          
          <h3>주요 메소드</h3>
          <ul>
            <li><b>validateCheck()</b>: 고객 정보의 유효성 검사</li>
            <li><b>processWithdrawal()</b>: 출금 요청 처리</li>
            <li><b>ask()</b>: 유효하지 않은 정보에 대해 고객에게 질문</li>
          </ul>
          
          <h3>학습 포인트</h3>
          <ul>
            <li><b>의존성 주입</b>: BankSystem 객체를 외부에서 주입받음</li>
            <li><b>상수 사용</b>: 유효성 검사 타입을 상수로 정의</li>
            <li><b>객체 협력</b>: AccountPaperVo, AccountVo, BankSystem 객체와 협력</li>
            <li><b>유효성 검사 패턴</b>: 입력 데이터 검증 절차 구현</li>
            <li><b>은행 업무 프로세스</b>: 실제 은행에서 이루어지는 업무 흐름 모델링</li>
          </ul>
        `
      },
      BankSystem: {
        code: `package chapter07.java0718Kbank_v02;

/**
 * 은행 시스템 핵심 클래스
 * 고객 계정 관리 및 은행 업무 처리
 */
public class BankSystem {
  
  // 시스템 정보
  String name;
  AccountVo[] accountList; // 고객 계정 목록
  
  // 생성자
  public BankSystem(String name) {
    this.name = name;
    // 고객 계정 리스트 생성
    accountList = createAccountList();
  }
  
  /**
   * 고객 계정 검색
   */
  public int searchAccount(AccountPaperVo accountPaper) {
    int resultIdx = -1; // 검색 실패 시 -1 반환
    
    for(int i = 0; i <accountList.length; i++) {
      AccountVo account = accountList[i];
      if(account.getAccountNumber().equals(accountPaper.getAccountNumber())
        && account.getPassword().equals(accountPaper.getPassword())) {
        resultIdx = i;
        break;
      }
    }
    return resultIdx;
  }
  
  /**
   * 은행 고객리스트 생성
   */
  public AccountVo[] createAccountList() {
    // 샘플 데이터
    String[] names = {"홍길동", "이순신", "김유신"};
    String[] numbers = {"kb-1234", "kb-9876", "kb-3456"};
    String[] passwords = {"1234", "9876", "3456"};
    int[] balances = {500, 1000, 700};
    
    AccountVo[] list = new AccountVo[names.length];
    
    // 고객 계정 생성
    for(int i = 0; i < names.length; i++) {
      AccountVo account = new AccountVo();
      account.setName(names[i]);
      account.setAccountNumber(numbers[i]);
      account.setPassword(passwords[i]);
      account.setBalance(balances[i]);
      
      list[i] = account;
    }
    return list;
  }
  
  /**
   * 고객 리스트 출력
   */
  public void showAccountList() {
    System.out.println("=============================================");
    System.out.println("\t " + name + " 고객 리스트");
    System.out.println("=============================================");
    for(int i = 0; i < accountList.length; i++) {
      AccountVo account = accountList[i];
      System.out.print(i+1 + ".\\t");
      System.out.print(account.getName() + ".\\t");
      System.out.print(account.getAccountNumber() + ".\\t");
      System.out.print(account.getPassword() + ".\\t");
      System.out.print(account.getBalance() + ".\\n");
    }
    System.out.println("=============================================");
  }
  
  /**
   * 잔액 확인
   */
  public void confirmBalance(AccountPaperVo accountPaper) {
    int resultIdx = searchAccount(accountPaper);
    
    if(resultIdx != -1) {
      System.out.println("=============================================");
      System.out.print(accountList[resultIdx].getName() + ".\\t");
      System.out.print(accountList[resultIdx].getAccountNumber() + ".\\t");
      System.out.print(accountList[resultIdx].getPassword() + ".\\t");
      System.out.print(accountList[resultIdx].getBalance() + ".\\n");
      System.out.println("=============================================");
      System.out.println("[BankSystem] 이용해주셔서 감사합니다.");
    } else {
      System.out.println("[BankSystem] 일치하는 고객정보가 없습니다.");
    }
  }
}`,
        explanation: `
          <h3>BankSystem 클래스 설명</h3>
          <p>이 클래스는 은행 시스템의 핵심 기능을 구현한 것으로, 고객 계정 관리 및 은행 업무 처리를 담당합니다.</p>
          
          <div class="highlight">
            <p><strong>은행 시스템의 주요 기능:</strong></p>
            <ul>
              <li>고객 계정 리스트 생성 및 관리</li>
              <li>고객 계정 검색</li>
              <li>고객 리스트 출력</li>
              <li>잔액 확인</li>
            </ul>
          </div>
          
          <h3>주요 메소드</h3>
          <ul>
            <li><b>createAccountList()</b>: 샘플 고객 계정 리스트 생성</li>
            <li><b>searchAccount()</b>: 계좌번호와 비밀번호로 고객 계정 검색</li>
            <li><b>showAccountList()</b>: 전체 고객 리스트 출력</li>
            <li><b>confirmBalance()</b>: 특정 고객의 잔액 확인</li>
          </ul>
          
          <h3>학습 포인트</h3>
          <ul>
            <li><b>데이터 관리</b>: 고객 계정 배열을 통한 데이터 관리</li>
            <li><b>검색 알고리즘</b>: 배열에서 특정 객체 검색 방법</li>
            <li><b>은행 시스템 핵심 기능</b>: 실제 은행 시스템에서의 핵심 기능 구현 방법</li>
            <li><b>객체 배열</b>: 객체를 배열로 관리하는 방법</li>
            <li><b>데이터 출력 포맷팅</b>: 콘솔에 표 형식으로 데이터 출력</li>
          </ul>
        `
      },
      Customer: {
        code: `package chapter07.java0718Kbank_v02;

import java.util.Scanner;

/**
 * 은행 고객 클래스
 * 은행을 방문한 고객의 행동 구현
 */
public class Customer {
  
  // 고객 정보
  private String name;
  private String accountNumber;
  private String password;
  private int money;
  
  // 관련 객체
  private AccountPaperVo accountPaper;
  private Scanner scan;

  // 기본 생성자
  public Customer() {}

  // 매개변수 생성자
  public Customer(String name, String accountNumber, String password, int money) {
    this.name = "[방문고객 : " + name + "]";
    this.accountNumber = accountNumber;
    this.password = password;
    this.money = money;
    this.scan = new Scanner(System.in);
    System.out.println(this.name + " 입장");
  }
  
  /**
   * 은행직원의 유효성 체크 후 응답
   */
  public AccountPaperVo answer(int checkResult) {
    switch(checkResult) {
      case BankMan.ACCOUNT_NAME:
        System.out.print(this.name + " 고객명 > ");
        accountPaper.setName(scan.next());
        break;
      case BankMan.ACCOUNT_NUMBER:
        System.out.print(this.name + " 계좌번호 > ");
        accountPaper.setAccountNumber(scan.next());
        break;
      case BankMan.ACCOUNT_PASSWORD:
        System.out.print(this.name + " 비밀번호 > ");
        accountPaper.setPassword(scan.next());
        break;
      case BankMan.ACCOUNT_MONEY:
        System.out.print(this.name + " 금액 > ");
        accountPaper.setMoney(scan.nextInt());
        break;
    }
    return accountPaper;
  }

  // Getter와 Setter 메소드들
  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public String getAccountNumber() {
    return accountNumber;
  }

  public void setAccountNumber(String accountNumber) {
    this.accountNumber = accountNumber;
  }

  public String getPassword() {
    return password;
  }

  public void setPassword(String password) {
    this.password = password;
  }

  public int getMoney() {
    return money;
  }

  public void setMoney(int money) {
    this.money = money;
  }

  public AccountPaperVo getAccountPaper() {
    return accountPaper;
  }

  /**
   * 16. 은행 비치용 입출금 용지 설정
   */
  public void setAccountPaper(AccountPaperVo accountPaper) {
    accountPaper.setName(this.name);
    accountPaper.setAccountNumber(this.accountNumber);
    accountPaper.setPassword(this.password);
    accountPaper.setMoney(this.money);
    this.accountPaper = accountPaper;
    System.out.println(this.name + " 출금 정보 작성 완료");
    System.out.println(this.name + " 은행직원에게 출금용지 전달");
  }

  public Scanner getScan() {
    return scan;
  }

  public void setScan(Scanner scan) {
    this.scan = scan;
  }
}`,
        explanation: `
          <h3>Customer 클래스 설명</h3>
          <p>이 클래스는 은행을 방문한 고객의 행동을 구현한 것으로, 은행 직원과의 상호작용을 담당합니다.</p>
          
          <div class="highlight">
            <p><strong>고객의 주요 역할:</strong></p>
            <ul>
              <li>입출금 용지 작성</li>
              <li>은행 직원에게 용지 제출</li>
              <li>은행 직원의 질문에 응답</li>
            </ul>
          </div>
          
          <h3>주요 메소드</h3>
          <ul>
            <li><b>setAccountPaper()</b>: 입출금 용지에 고객 정보 설정</li>
            <li><b>answer()</b>: 은행 직원의 유효성 체크 결과에 응답</li>
          </ul>
          
          <h3>학습 포인트</h3>
          <ul>
            <li><b>사용자 입력 처리</b>: Scanner를 통한 콘솔 입력 처리</li>
            <li><b>객체 상태 설정</b>: 다른 객체(AccountPaperVo)의 상태를 설정하는 방법</li>
            <li><b>상호작용 모델링</b>: 고객과 은행 직원 간의 상호작용 구현</li>
            <li><b>은행 업무 흐름</b>: 실제 은행에서 고객이 수행하는 행동 모델링</li>
          </ul>
        `
      },
      KBBank: {
        code: `package chapter07.java0718Kbank_v02;

/**
 * 은행 시스템 실행 메인 클래스
 * 프로그램의 시작점
 */
public class KBBank {

  public static void main(String[] args) {
    
    // 8. BankSystem 인스턴스 생성
    BankSystem kbsystem = new BankSystem("KB");
    
    // 1. - 4. 싱글턴 AccountPaperVo 인스턴스 가져오기
    AccountPaperVo accountPaper = AccountPaperVo.getInstance();
    
    // 5. 은행직원 생성 (의존성 주입)
    BankMan staffPark = new BankMan("박보검", kbsystem);
    
    // 13. 고객 리스트 출력
    staffPark.getKbsystem().showAccountList();
    
    // 14. 고객 생성
    Customer hong = new Customer("홍길동", "kb-1234", null, 0);
    boolean validateFlag = true;
    
    // 15. 고객이 입출금 용지 설정
    hong.setAccountPaper(accountPaper);
    
    // 20. 은행 직원이 고객의 용지 받음
    staffPark.setAccountPaper(hong.getAccountPaper());
    
    // 유효성 검사
    staffPark.validateCheck();
    
    // 유효성 검사 반복
    while(validateFlag) {
      if(staffPark.validateCheck(hong.answer(staffPark.checkResult))) {
        validateFlag = false;
      }
    }
    
    // 출금 처리
    staffPark.processWithdrawal();
    
    // 잔액 확인
    kbsystem.confirmBalance(hong.getAccountPaper());
  }
}`,
        explanation: `
          <h3>KBBank 클래스 설명</h3>
          <p>이 클래스는 은행 시스템의 실행 진입점(Entry Point)으로, main() 메소드를 포함합니다.</p>
          
          <div class="highlight">
            <p><strong>프로그램 실행 흐름:</strong></p>
            <ol>
              <li>은행 시스템(BankSystem) 인스턴스 생성</li>
              <li>싱글턴 입출금 용지(AccountPaperVo) 인스턴스 가져오기</li>
              <li>은행 직원(BankMan) 인스턴스 생성</li>
              <li>고객(Customer) 인스턴스 생성</li>
              <li>고객이 입출금 용지 작성</li>
              <li>은행 직원이 용지 접수 및 유효성 검사</li>
              <li>출금 처리</li>
              <li>잔액 확인</li>
            </ol>
          </div>
          
          <h3>주요 동작</h3>
          <ul>
            <li><b>객체 생성</b>: 시스템에 필요한 모든 객체 생성</li>
            <li><b>의존성 주입</b>: 객체 간의 관계 설정</li>
            <li><b>업무 흐름 제어</b>: 은행 업무의 전체 흐름 관리</li>
          </ul>
          
          <h3>학습 포인트</h3>
          <ul>
            <li><b>메인 클래스</b>: 프로그램의 시작점 역할</li>
            <li><b>객체 협력</b>: 여러 객체가 협력하여 업무 처리</li>
            <li><b>싱글턴 패턴 사용</b>: AccountPaperVo.getInstance() 호출</li>
            <li><b>은행 업무 프로세스</b>: 실제 은행 업무 흐름의 구현</li>
            <li><b>객체 지향 설계</b>: 책임 분리와 역할에 따른 객체 설계</li>
          </ul>
        `
      }
    };

    // DOM 요소 가져오기
    const tabs = document.querySelectorAll('.tab');
    const codeDisplay = document.getElementById('code-display');
    const explanationDisplay = document.getElementById('explanation');
    const consoleOutput = document.getElementById('console-output');
    const btnRun = document.getElementById('btn-run');
    const btnStep = document.getElementById('btn-step');
    const btnReset = document.getElementById('btn-reset');
    
    // 현재 활성 탭 추적
    let activeTab = 'AccountPaperVo';
    
    // 탭 클릭 이벤트 처리
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // 기존 활성 탭 비활성화
        document.querySelector('.tab.active').classList.remove('active');
        
        // 새 탭 활성화
        tab.classList.add('active');
        
        // 파일명 업데이트
        const filename = tab.getAttribute('data-file');
        document.querySelector('.filename').textContent = filename + '.java';
        
        // 코드 및 설명 업데이트
        activeTab = filename;
        updateCodeDisplay(activeTab);
      });
    });
    
    // 코드 디스플레이 업데이트 함수
    function updateCodeDisplay(file) {
      const data = codeData[file];
      if (!data) return;
      
      // 코드 영역 업데이트
      const lines = data.code.split('\n');
      let codeHTML = '';
      
      lines.forEach((line, index) => {
        let formattedLine = line;
        
        // 구문 강조
        formattedLine = formattedLine
          .replace(/\/\*\*[\s\S]*?\*\//g, match => `<span class="comment">${match}</span>`)
          .replace(/\/\/.*$/g, match => `<span class="comment">${match}</span>`)
          .replace(/\b(public|private|static|class|void|int|String|new|if|else|for|while|return|switch|case|break)\b/g, '<span class="keyword">$1</span>')
          .replace(/"([^"]*)"/g, '<span class="string">"$1"</span>')
          .replace(/\b(\d+)\b/g, '<span class="number">$1</span>')
          .replace(/\b([A-Z][a-zA-Z0-9]*\(\))\b/g, '<span class="annotation">$1</span>');
        
        codeHTML += `
          <div class="code-line">
            <div class="line-number">${index + 1}</div>
            <div class="code-content">${formattedLine}</div>
          </div>
        `;
      });
      
      codeDisplay.innerHTML = codeHTML;
      
      // 설명 영역 업데이트
      explanationDisplay.innerHTML = data.explanation;
    }
    
    // 시뮬레이션 데이터
    const simulationSteps = [
      "KB 은행 시스템 시작",
      "BankSystem 인스턴스 생성: KB",
      "AccountPaperVo 싱글턴 인스턴스 가져오기",
      "은행직원 생성: [은행직원 : 박보검] 업무시작",
      "KB 고객 리스트 출력",
      "=============================================",
      "     KB 고객 리스트",
      "=============================================",
      "1.  홍길동.  kb-1234.  1234.  500.",
      "2.  이순신.  kb-9876.  9876.  1000.",
      "3.  김유신.  kb-3456.  3456.  700.",
      "=============================================",
      "방문고객 생성: [방문고객 : 홍길동] 입장",
      "고객이 출금용지 작성: [방문고객 : 홍길동] 출금 정보 작성 완료",
      "고객이 은행직원에게 출금용지 전달: [방문고객 : 홍길동] 은행직원에게 출금용지 전달",
      "은행직원이 용지 접수: [은행직원 : 박보검] 방문고객에게 출금용지 받음",
      "은행직원이 유효성 검사: [은행직원 : 박보검] 출금용지에 기재된 고객 정보 유효성 체크 진행",
      "비밀번호가 일치하지 않습니다: [은행직원 : 박보검] 비밀번호가 일치하지 않습니다, 다시 입력해주세요.",
      "고객 응답: [방문고객 : 홍길동] 비밀번호 > 1234",
      "은행직원이 유효성 재검사: [은행직원 : 박보검] 다시 출금용지에 기재된 고객 정보에 대한 유효성 체크를 재진행한다.",
      "모든 정보 입력 완료: 모두 입력이 완료되었습니다.",
      "은행직원이 출금 처리: [은행직원 : 박보검] 출금요청 처리가 진행 중입니다. 잠시 기다려주세요.",
      "출금 처리 완료: [은행직원 : 박보검] 출금 처리가 완료되었습니다.",
      "출금액 확인: [은행직원 : 박보검] 출금액은 0입니다.",
      "잔액 확인: =============================================",
      "홍길동.  kb-1234.  1234.  500.",
      "=============================================",
      "시스템 메시지: [BankSystem] 이용해주셔서 감사합니다."
    ];
    
    let currentStep = 0;
    
    // 시뮬레이션 실행
    function runSimulation() {
      consoleOutput.innerHTML = '';
      currentStep = 0;
      runNextStep();
    }
    
    // 단계별 실행
    function runNextStep() {
      if (currentStep >= simulationSteps.length) return;
      
      const line = document.createElement('div');
      line.className = 'console-line';
      line.textContent = simulationSteps[currentStep];
      consoleOutput.appendChild(line);
      
      // 스크롤 아래로
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
      
      currentStep++;
      
      // 0.5초 간격으로 다음 단계 실행
      if (currentStep < simulationSteps.length) {
        setTimeout(runNextStep, 500);
      }
    }
    
    // 단계별 실행
    function stepSimulation() {
      if (currentStep >= simulationSteps.length) return;
      
      const line = document.createElement('div');
      line.className = 'console-line';
      line.textContent = simulationSteps[currentStep];
      consoleOutput.appendChild(line);
      
      // 스크롤 아래로
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
      
      currentStep++;
    }
    
    // 시뮬레이션 초기화
    function resetSimulation() {
      consoleOutput.innerHTML = '<div class="console-line">콘솔 출력이 여기에 표시됩니다...</div>';
      currentStep = 0;
    }
    
    // 이벤트 리스너 등록
    btnRun.addEventListener('click', runSimulation);
    btnStep.addEventListener('click', stepSimulation);
    btnReset.addEventListener('click', resetSimulation);
    
    // 초기 코드 표시
    updateCodeDisplay(activeTab);
  </script>
</body>
</html>